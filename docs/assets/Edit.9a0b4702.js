let e=document.createElement("style");e.innerHTML="",document.head.appendChild(e);import{d as o,f as l,w as a,k as t,h as n,l as s,v as i,o as u,c as d,r,g as c,u as p,a as v,b as m,i as f,m as w,F as h,e as y}from"./index.7ac17bbb.js";import{s as T,k,l as V,i as b,m as g,n as S}from"./VIcon.e5d9affd.js";import{l as C,s as E,d as x}from"./TopicStore.f9b830a4.js";var F=o({name:"VEditorInput",props:{modelValue:String,autoFocus:Boolean},setup(e,{emit:o}){const s=l(e.modelValue),i=l();return a(()=>{e.autoFocus&&t(()=>{var e;return null==(e=i.value)?void 0:e.focus()})}),n(s,e=>o("update:modelValue",e)),{value:s,input:i,blur:()=>o("blur"),focus:()=>o("focus"),keyup:e=>o("keyup",e),doDelete:()=>o("delete")}}});F.render=function(e,o,l,a,t,n){return s((u(),d("input",{type:"text",ref:"input","onUpdate:modelValue":o[1]||(o[1]=o=>e.value=o),onBlur:o[2]||(o[2]=(...o)=>e.blur(...o)),onFocus:o[3]||(o[3]=(...o)=>e.focus(...o)),onKeyup:o[4]||(o[4]=o=>e.keyup(o))},null,544)),[[i,e.value,void 0,{trim:!0,lazy:!0}]])},F.__file="src/components/VEditorInput.vue";var I=o({name:"TheEditor",props:{title:String,words:Array,id:String},emits:{save:e=>!!e,delete:()=>!0},components:{VIcon:T,VEditorInput:F},setup(e,{emit:o}){var a,t;const s=p(),i=l(e.title||""),u=r((null==(a=e.words)?void 0:a.map((e,o)=>({key:o,word:e})))||[]),d=l((null==(t=e.words)?void 0:t.length)||0),v=r(new Set),m=l(e.id||""),f=c(()=>!m.value);n(e,e=>{const o=e.words||[];u.splice(0),u.splice(0,0,...o.map((e,o)=>({key:o,word:e}))),d.value=o.length,i.value=e.title||""});const w=e=>{u.splice(e,1)};return{viewTitle:i,wordList:u,maxKey:d,emptyIndices:v,isNew:f,cancel:()=>{m.value?s.push({name:"game-stored-topic",params:{id:m.value}}):s.push({name:"home"})},addWord:()=>{u.push({word:"",key:d.value,focus:!0}),d.value+=1},save:()=>{const e={title:i.value,words:u.map(e=>e.word)};o("save",e)},deleteTopic:()=>{o("delete")},onBlur:e=>{""===u[e].word.trim()&&v.add(e)},onFocus:()=>{v.size>0&&(v.forEach(e=>w(e)),v.clear())},deleteWordAtIndex:w,faSave:k,faPlus:V,faTimes:b,faTimesCircle:g,faTrashAlt:S}}});const W={class:"pull-right"},A={key:0},B={key:1},K={class:"scrollable"},_={class:"info"},D=m("div",{class:"label"},"Title:",-1),N={class:"info"},U=m("div",{class:"label"},"Words:",-1);I.render=function(e,o,l,a,t,n){const s=v("v-icon"),i=v("v-editor-input");return u(),d(h,null,[m("header",null,[m("div",{class:"close-button",onClick:o[1]||(o[1]=(...o)=>e.cancel(...o))},[m(s,{icon:e.faTimes,"fixed-width":""},null,8,["icon"])]),m("div",W,[e.isNew?f("v-if",!0):m(s,{key:0,icon:e.faTrashAlt,class:"delete-button",onClick:e.deleteTopic},null,8,["icon","onClick"]),m(s,{icon:e.faSave,onClick:e.save},null,8,["icon","onClick"])]),e.isNew?(u(),d("h3",A,"New Topic")):(u(),d("h3",B,"Edit Topic"))]),m("main",null,[m("div",K,[m("div",_,[D,m("p",null,[m(i,{type:"text",modelValue:e.viewTitle,"onUpdate:modelValue":o[2]||(o[2]=o=>e.viewTitle=o),"auto-focus":!e.existing,onKeyup:w(e.addWord,["enter"])},null,8,["modelValue","auto-focus","onKeyup"])])]),m("div",N,[U,(u(!0),d(h,null,y(e.wordList,(o,l)=>(u(),d("p",{key:o.key,class:"item"},[m(i,{modelValue:o.word,"onUpdate:modelValue":e=>o.word=e,"auto-focus":o.focus,onBlur:o=>e.onBlur(l),onFocus:o=>e.onFocus(l),onKeyup:w(e.addWord,["enter"])},null,8,["modelValue","onUpdate:modelValue","auto-focus","onBlur","onFocus","onKeyup"]),m("span",{class:"item-delete",onClick:o=>e.deleteWordAtIndex(l)},[m(s,{icon:e.faTimesCircle},null,8,["icon"])],8,["onClick"])]))),128)),m("p",null,[m("button",{onClick:o[3]||(o[3]=(...o)=>e.addWord(...o))},[m(s,{icon:e.faPlus},null,8,["icon"])])])])])])],64)},I.__file="src/components/TheEditor.vue";var j=o({name:"Edit",components:{TheEditor:I},props:{id:String,storedTopics:Array},setup(e){var o;const t=p(),n=l(null==(o=(()=>{if(e.storedTopics&&e.id)return e.storedTopics.find(o=>o.id===e.id)})())?void 0:o.title),s=r([]),i=l(!1),u=l(e.id);return a(async()=>{if(!e.id)return void(u.value="");const o=await C(e.id);o?(n.value=o.title,s.splice(0),s.splice(0,0,...o.words),i.value=!0,u.value=e.id):u.value=""})(),{title:n,words:s,existing:i,handleSave:async e=>{u.value=await E(e,u.value),t.push({name:"game-stored-topic",params:{id:u.value}})},handleDelete:async()=>{u.value&&(await x(u.value),t.push({name:"home"}))}}}});j.render=function(e,o,l,a,t,n){const s=v("the-editor");return u(),d(s,{title:e.title,words:e.words,id:e.id,onSave:e.handleSave,onDelete:e.handleDelete},null,8,["title","words","id","onSave","onDelete"])},j.__file="src/views/Edit.vue";export default j;
