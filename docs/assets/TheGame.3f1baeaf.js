import{d as e,g as t,o as n,c as r,t as o,f as l,r as a,h as i,u as c,a as u,b as s,F as f,e as d,i as v,j as p}from"./index.7ac17bbb.js";import{s as b,b as h,c as y,d as m,e as j,g,h as S,i as w,j as k}from"./VIcon.e5d9affd.js";var x="object"==typeof global&&global&&global.Object===Object&&global,C="object"==typeof self&&self&&self.Object===Object&&self,A=x||C||Function("return this")(),T=A.Symbol,O=Object.prototype,F=O.hasOwnProperty,P=O.toString,W=T?T.toStringTag:void 0;var E=Object.prototype.toString;var H=T?T.toStringTag:void 0;function M(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?function(e){var t=F.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch(e){}var o=P.call(e);return r&&(t?e[W]=n:delete e[W]),o}(e):function(e){return E.call(e)}(e)}function U(e){return null!=e&&"object"==typeof e}var I=Array.isArray;var V=/^(?:0|[1-9]\d*)$/;function z(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&V.test(e))&&e>-1&&e%1==0&&e<t}function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function B(e){return null!=e&&L(e.length)&&!function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=M(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)}var _=Object.prototype;function D(e){return U(e)&&"[object Arguments]"==M(e)}var G=Object.prototype,N=G.hasOwnProperty,q=G.propertyIsEnumerable,$=D(function(){return arguments}())?D:function(e){return U(e)&&N.call(e,"callee")&&!q.call(e,"callee")};var R="object"==typeof exports&&exports&&!exports.nodeType&&exports,J=R&&"object"==typeof module&&module&&!module.nodeType&&module,K=J&&J.exports===R?A.Buffer:void 0,Q=(K?K.isBuffer:void 0)||function(){return!1},X={};X["[object Float32Array]"]=X["[object Float64Array]"]=X["[object Int8Array]"]=X["[object Int16Array]"]=X["[object Int32Array]"]=X["[object Uint8Array]"]=X["[object Uint8ClampedArray]"]=X["[object Uint16Array]"]=X["[object Uint32Array]"]=!0,X["[object Arguments]"]=X["[object Array]"]=X["[object ArrayBuffer]"]=X["[object Boolean]"]=X["[object DataView]"]=X["[object Date]"]=X["[object Error]"]=X["[object Function]"]=X["[object Map]"]=X["[object Number]"]=X["[object Object]"]=X["[object RegExp]"]=X["[object Set]"]=X["[object String]"]=X["[object WeakMap]"]=!1;var Y,Z="object"==typeof exports&&exports&&!exports.nodeType&&exports,ee=Z&&"object"==typeof module&&module&&!module.nodeType&&module,te=ee&&ee.exports===Z&&x.process,ne=function(){try{var e=ee&&ee.require&&ee.require("util").types;return e||te&&te.binding&&te.binding("util")}catch(e){}}(),re=ne&&ne.isTypedArray,oe=re?(Y=re,function(e){return Y(e)}):function(e){return U(e)&&L(e.length)&&!!X[M(e)]},le=Object.prototype.hasOwnProperty;function ae(e,t){var n=I(e),r=!n&&$(e),o=!n&&!r&&Q(e),l=!n&&!r&&!o&&oe(e),a=n||r||o||l,i=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=i.length;for(var u in e)!t&&!le.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||l&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||z(u,c))||i.push(u);return i}var ie=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),ce=Object.prototype.hasOwnProperty;function ue(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||_))return ie(e);var t,n,r=[];for(var o in Object(e))ce.call(e,o)&&"constructor"!=o&&r.push(o);return r}function se(e,t){return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,(function(t){return e[t]}))}function fe(e){return null==e?[]:se(e,function(e){return B(e)?ae(e):ue(e)}(e))}var de=Math.floor,ve=Math.random;function pe(e,t){var n,r,o=-1,l=e.length,a=l-1;for(t=void 0===t?l:t;++o<t;){var i=(r=a,(n=o)+de(ve()*(r-n+1))),c=e[i];e[i]=e[o],e[o]=c}return e.length=t,e}function be(e){return pe(function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e))}function he(e){return pe(fe(e))}function ye(e){return(I(e)?be:he)(e)}var me=e({name:"VFit",props:{text:String,width:Number},setup:e=>({fontSize:t(()=>{var t;const n=1.3*(e.width||100),r=(null==(t=e.text)?void 0:t.length)||1;return Math.min(Math.max(n/r,8),22)+"vw"})})});function je(){return Math.floor(Date.now()/1e3)}me.render=function(e,t,l,a,i,c){return n(),r("h1",{style:{fontSize:e.fontSize}},o(e.text),5)},me.__file="src/components/VFit.vue";var ge=e({name:"TheGame",components:{VFit:me,VIcon:b},props:{title:String,words:Array,id:String},setup(e){const n=c(),r=l(e.title),o=a(e.words||[]),u=l(!1),s=l(je()),f=a([]),d=a(new Set),v=a(new Set),p=l(0),b=l(0),x=l(0),C=l(!1),A=l(60),T=l(),O=()=>{C.value=!0,s.value=je(),T.value&&(clearTimeout(T.value),T.value=void 0)},F=()=>{d.add(b.value);const e=new Set(v);let t;t=b.value+1>=f.length?0:b.value+1;let n=-1;for(;t!==b.value&&-1===n;)e.has(t)?t+1>=f.length?t=0:t+=1:n=t;-1===n?O():n<f.length&&(b.value=n),n>p.value&&(p.value=n)},P=()=>{const e=o;if(!e||0===e.length)return;const t=[];if(d.size<e.length)for(let n=0;n<e.length;n+=1)d.has(n)||t.push(n);else{for(let n=0;n<e.length;n+=1)t.push(n);d.clear()}const n=ye(t),r=ye(Array.from(d.values()));f.splice(0),f.splice(0,0,...n,...r)},W=()=>{x.value=s.value-je(),x.value>0?T.value=setTimeout(()=>W(),1e3):C.value=!0},E=t(()=>!!navigator.share),H=t(()=>!!e.id);i(e,()=>{o.splice(0),e.words&&o.splice(0,0,...e.words),P(),r.value=e.title});const M=t(()=>e.words?e.words[f[b.value]]:""),U=t(()=>{const t=[];if(!e.words)return t;for(let n=0;n<=p.value;n+=1)t.push({word:e.words[f[n]],isCorrect:!1});return v.forEach(e=>{t[e]&&(t[e].isCorrect=!0)}),t}),I=t(()=>v.size);return{viewTitle:r,currentWord:M,results:U,score:I,timeLimit:A,setTimeLimit:e=>{A.value=e},nextWord:F,finish:O,reset:()=>{u.value=!1,C.value=!1,b.value=0,v.clear(),p.value=0,T.value&&(clearTimeout(T.value),T.value=void 0),P()},start:()=>{u.value=!0,s.value=je()+A.value,W()},isEditable:H,edit:()=>{e.id&&n.push({name:"edit",params:{id:e.id}})},goHome:()=>{n.push({name:"home"})},correctWord:()=>{v.add(b.value),F()},shuffledWords:f,remainingSeconds:x,isStarted:u,isFinished:C,canShare:E,share:async()=>{try{await navigator.share({title:"Sharades: "+r.value,text:`Play the topic ${r.value} on Sharades`,url:window.location.toString()}),r.value=e.title}finally{}},faHome:h,faPlay:y,faStepForward:m,faCheck:j,faUndo:g,faEdit:S,faTimes:w,faShare:k}}});const Se=p("Home "),we=p("Play again "),ke={id:"timer"},xe={class:"overlay"},Ce={id:"correct"},Ae=p("Correct "),Te={id:"skip"},Oe=p("Skip "),Fe={class:"pull-right"},Pe=s("h3",null,"Sharades",-1),We={class:"info"},Ee=s("div",{class:"label"},"Topic:",-1),He={class:"value"},Me={class:"info"},Ue=s("div",{class:"label"},"Time limit:",-1),Ie={class:"value"},Ve=p("Play ");ge.render=function(e,t,l,a,i,c){const b=u("v-icon"),h=u("v-fit");return e.isFinished?(n(),r(f,{key:0},[s("header",null,[s("div",{class:"close-button",onClick:t[1]||(t[1]=(...t)=>e.reset(...t))},[s(b,{icon:e.faTimes,"fixed-width":""},null,8,["icon"])]),s("h3",null,"Score: "+o(e.score),1)]),s("main",null,[s("div",null,[s("ol",null,[(n(!0),r(f,null,d(e.results,(t,l)=>(n(),r("li",{key:l,class:{correct:t.isCorrect}},[s(b,{icon:t.isCorrect?e.faCheck:e.faTimes},null,8,["icon"]),p(" "+o(t.word),1)],2))),128))])])]),s("nav",null,[s("p",null,[s("button",{onClick:t[2]||(t[2]=(...t)=>e.goHome(...t))},[s(b,{icon:e.faHome},null,8,["icon"]),Se])]),s("p",null,[s("button",{id:"reset",onClick:t[3]||(t[3]=(...t)=>e.reset(...t))},[s(b,{icon:e.faUndo},null,8,["icon"]),we])])])],64)):e.isStarted?(n(),r(f,{key:1},[s("header",null,[s("div",{class:"close-button",onClick:t[4]||(t[4]=(...t)=>e.reset(...t))},[s(b,{icon:e.faTimes,"fixed-width":""},null,8,["icon"])]),s("h3",ke,o(e.remainingSeconds),1)]),s("main",null,[s("div",xe,[s("div",{class:"half",onClick:t[5]||(t[5]=(...t)=>e.correctWord(...t))}),s("div",{class:"half",onClick:t[6]||(t[6]=(...t)=>e.nextWord(...t))})]),s(h,{text:e.currentWord},null,8,["text"])]),s("nav",null,[s("p",{onClick:t[7]||(t[7]=(...t)=>e.correctWord(...t))},[s("button",Ce,[s(b,{icon:e.faCheck},null,8,["icon"]),Ae])]),s("p",{onClick:t[8]||(t[8]=(...t)=>e.nextWord(...t))},[s("button",Te,[s(b,{icon:e.faStepForward},null,8,["icon"]),Oe])])])],64)):(n(),r(f,{key:2},[s("header",null,[s("div",{class:"close-button",onClick:t[9]||(t[9]=(...t)=>e.goHome(...t))},[s(b,{icon:e.faHome},null,8,["icon"])]),s("div",Fe,[e.isEditable?s(b,{key:0,onClick:e.edit,icon:e.faEdit},null,8,["onClick","icon"]):v("v-if",!0),e.canShare?s(b,{key:1,onClick:t[10]||(t[10]=t=>e.share(t)),icon:e.faShare},null,8,["icon"]):v("v-if",!0)]),Pe]),s("main",null,[s("div",null,[s("div",We,[Ee,s("div",He,o(e.viewTitle),1)]),s("div",Me,[Ue,s("div",Ie,[(n(),r(f,null,d([30,60,90,120],t=>s("span",{key:t,class:{option:!0,selected:e.timeLimit===t},onClick:n=>e.setTimeLimit(t)},o(t),11,["onClick"])),64))])])])]),s("nav",null,[s("p",null,[s("button",{id:"start",onClick:t[11]||(t[11]=(...t)=>e.start(...t))},[s(b,{icon:e.faPlay},null,8,["icon"]),Ve])])])],64))},ge.__file="src/components/TheGame.vue";export{ge as s};
