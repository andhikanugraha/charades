let e=document.createElement("style");e.innerHTML="",document.head.appendChild(e);import{d as o,r as l,w as t,k as a,h as i,l as n,v as s,o as d,c as u,f as r,g as c,u as p,a as v,b as m,i as f,m as w,F as h,e as y}from"./index.17b11773.js";import{loadTopic as T,saveTopic as k,deleteTopic as b}from"./TopicStore.7d285d8b.js";import{s as V,k as S,l as g,i as C,m as E,n as x}from"./VIcon.0db901b6.js";var F=o({name:"VEditorInput",props:{modelValue:String,autoFocus:Boolean},setup(e,{emit:o}){const n=l(e.modelValue),s=l();return t(()=>{e.autoFocus&&a(()=>{var e;return null==(e=s.value)?void 0:e.focus()})}),i(n,e=>o("update:modelValue",e)),{value:n,input:s,blur:()=>o("blur"),focus:()=>o("focus"),keyup:e=>o("keyup",e),doDelete:()=>o("delete")}}});F.render=function(e,o,l,t,a,i){return n((d(),u("input",{type:"text",ref:"input","onUpdate:modelValue":o[1]||(o[1]=o=>e.value=o),onBlur:o[2]||(o[2]=(...o)=>e.blur(...o)),onFocus:o[3]||(o[3]=(...o)=>e.focus(...o)),onKeyup:o[4]||(o[4]=o=>e.keyup(o))},null,544)),[[s,e.value,void 0,{trim:!0,lazy:!0}]])},F.__file="src/components/VEditorInput.vue";var I=o({name:"TheEditor",props:{title:String,words:Array,id:String},components:{VIcon:V,VEditorInput:F},setup(e,{emit:o}){var t,a;const n=p(),s=l(e.title||""),d=r((null==(t=e.words)?void 0:t.map((e,o)=>({key:o,word:e})))||[]),u=l((null==(a=e.words)?void 0:a.length)||0),v=r(new Set),m=l(e.id||""),f=c(()=>!m.value);i(e,e=>{const o=e.words||[];d.splice(0),d.splice(0,0,...o.map((e,o)=>({key:o,word:e}))),u.value=o.length,s.value=e.title||""});const w=e=>{d.splice(e,1)};return{viewTitle:s,wordList:d,maxKey:u,emptyIndices:v,isNew:f,cancel:()=>{m.value?n.push({name:"game-stored-topic",params:{id:m.value}}):n.push({name:"home"})},addWord:()=>{d.push({word:"",key:u.value,focus:!0}),u.value+=1},save:()=>{const e={title:s.value,words:d.map(e=>e.word)};o("save",e)},deleteTopic:()=>{o("delete")},onBlur:e=>{""===d[e].word.trim()&&v.add(e)},onFocus:()=>{v.size>0&&(v.forEach(e=>w(e)),v.clear())},deleteWordAtIndex:w,faSave:S,faPlus:g,faTimes:C,faTimesCircle:E,faTrashAlt:x}}});const W={class:"root"},A={class:"pull-right"},B={key:0},_={key:1},D={class:"scrollable"},K={class:"info"},N=m("div",{class:"label"},"Title:",-1),U={class:"info"},j=m("div",{class:"label"},"Words:",-1);I.render=function(e,o,l,t,a,i){const r=v("v-icon"),c=v("v-editor-input");return d(),u("div",W,[m("header",null,[m("div",{class:"close-button",onClick:o[1]||(o[1]=(...o)=>e.cancel(...o))},[m(r,{icon:e.faTimes,"fixed-width":""},null,8,["icon"])]),m("div",A,[e.isNew?f("v-if",!0):m(r,{key:0,icon:e.faTrashAlt,class:"delete-button",onClick:e.deleteTopic},null,8,["icon","onClick"]),m(r,{icon:e.faSave,onClick:e.save},null,8,["icon","onClick"])]),e.isNew?(d(),u("h3",B,"New Topic")):(d(),u("h3",_,"Edit Topic"))]),m("main",null,[m("div",D,[m("div",K,[N,m("p",null,[n(m("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=o=>e.viewTitle=o),onKeyup:o[3]||(o[3]=w((...o)=>e.addWord(...o),["enter"]))},null,544),[[s,e.viewTitle,void 0,{trim:!0,lazy:!0}]])])]),m("div",U,[j,(d(!0),u(h,null,y(e.wordList,(o,l)=>(d(),u("p",{key:o.key,class:"item"},[m(c,{modelValue:o.word,"onUpdate:modelValue":e=>o.word=e,"auto-focus":o.focus,onBlur:o=>e.onBlur(l),onFocus:o=>e.onFocus(l),onKeyup:w(e.addWord,["enter"])},null,8,["modelValue","onUpdate:modelValue","auto-focus","onBlur","onFocus","onKeyup"]),m("span",{class:"item-delete",onClick:o=>e.deleteWordAtIndex(l)},[m(r,{icon:e.faTimesCircle},null,8,["icon"])],8,["onClick"])]))),128)),m("p",null,[m("button",{onClick:o[4]||(o[4]=(...o)=>e.addWord(...o))},[m(r,{icon:e.faPlus},null,8,["icon"])])])])])])])},I.__file="src/components/TheEditor.vue";var z=o({name:"Edit",components:{TheEditor:I},props:{id:String,storedTopics:Array},setup(e,{emit:o}){var a;const i=p(),n=l(null==(a=(()=>{if(e.storedTopics&&e.id)return e.storedTopics.find(o=>o.id===e.id)})())?void 0:a.title),s=r([]),d=l(!1),u=l(e.id);return t(async()=>{if(!e.id)return void(u.value="");const o=await T(e.id);o?(n.value=o.title,s.splice(0),s.splice(0,0,...o.words),d.value=!0,u.value=e.id):u.value=""})(),{title:n,words:s,existing:d,handleSave:async e=>{u.value=await k(e,u.value),o("load-stored-topics"),i.push({name:"game-stored-topic",params:{id:u.value}})},handleDelete:async()=>{u.value&&(await b(u.value),o("load-stored-topics"),i.push({name:"home"}))}}}});z.render=function(e,o,l,t,a,i){const n=v("the-editor");return d(),u(n,{title:e.title,words:e.words,id:e.id,onSave:e.handleSave,onDelete:e.handleDelete},null,8,["title","words","id","onSave","onDelete"])},z.__file="src/views/Edit.vue";export default z;
